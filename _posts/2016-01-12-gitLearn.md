---
layout: post
title: git学习笔记
category: git
tags: git
keywords: git
hidden: true
---

##Git学习笔记
1. `git push -u origin master`:The -u tells Git to remember the parameters, so that next time we can simply run git push and Git will know what to do.
2. 查看git命令的帮助：

        // 下面两个等价
        git help config  
        man git-config

        // 查看简略的参数
        git config -h

3. git中的4个对象：blob object、tree、commit object、tag object
4. git分支的本质：一个指向一系列提交之首的指针或者引用
5. git引用：HEAD引用、tag引用、remotes引用
6. git常用的目录

        .git
        |--HEAD
        |--config
        |--description
        |--logs/
                |--HEAD
                |--refs/
                        |--heads/
                                |--master
                                |--other local branch
                        |--remotes/
                                |--origin/
                                        |--master
                                        |--other remote/origin branch
                                |--other git reposity
        |--hooks/
        |--info/
        |--objects/
                |--pack/
                |--..(sha-1[0-1])/....(sha-1[2-40])
        |--refs/
                |--heads/
                        |--master
                        |--other local branch
                |--remotes
                        |--origin/
                                |--master
                                |--other remote/origin branch
                        |--test/
                        |--other git reposity
                |--tags/


7. git gc:git文件的保存一开始是loose模式，即每个文件单独存放，但在`git gc`或者`git push`之前会将所有commit的文件打包，放到`.git/objects/pack`下，里面的文件会以差异记录的方式保存，更有意思的是旧文件以新文件为基础做差异记录。
8. `git push origin master`中各字段的含义：origin是remotes仓库在本地的别名，一般默认使用origin，当然也可以通过`git remote`命令创建新的remote仓库，如上面的目录图中的`/refs/remotes/test`就是另外定义的；master是`master:master`的缩写，第一个master是本地分支(refs/heads/master)，第二个master是远程分支(refs/remotes/origin/master)
9. git有两种传输协议：哑协议（只能拉去数据，无法提交，http实现）和智能协议（拉去数据和提交数据，可以通过ssh、http(s)实现，之中有`send-pack`、`receive-pack`两个进程进行更新与同步）。更有趣的时，可以通过ssh(send-pack/receive-pack)、http(s)(get/post)来获取或提交关于git中你想要的一切信息，只要自己去解析引用与数据之间的关系。
10. 我们可以通过修改git引用或者git commit 历史记录引用的任何信息来修改或者恢复git库，常用的命令有`git log --pretty=oneline`、`git log -g`有效等同于`git reflog`(会记录HEAD每次改变的记录)、甚至于`git fsck -full`(会查找所有object中没被其他对象引用对象（blob、tree、commit、tag)，找到这些引用可以用来恢复一些硬操作）
11. 关于`git reset --soft/--hard HEAD`[linsk](https://git-scm.com/docs/git-reset)，`--soft`不会改变当前工作区的文件，`--hard`会丢弃当前工作区的文件。`HEAD`、`HEAD^`、`HEAD~2`、`HEAD~3`、`HEAD@{n}`(git reflog 或者git log -g查看)，请看下一张图：
![git reset](/images/git/reset.png)
12. In its default mode, git pull is shorthand for git fetch followed by git merge FETCH_HEAD.(git pull就是git fetch + git merge fetch_head)